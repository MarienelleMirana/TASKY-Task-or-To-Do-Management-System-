<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Tasky ‚Äî Calendar</title>
<link href="https://fonts.cdnfonts.com/css/amsterdam-four" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<style>
  body{
    margin:0;
    min-height:100vh;
    font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background:linear-gradient(135deg, rgba(255,215,0,0.6), rgba(30,144,255,0.7));
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    padding:40px 0;
  }
  .container{
    background:rgba(255,255,255,0.9);
    border-radius:16px;
    padding:24px;
    box-shadow:0 8px 24px rgba(0,0,0,0.15);
    width:90%;
    max-width:1000px;
  }
  h1{font-family:'Amsterdam Four',cursive;margin:0 0 20px 0;color:#1c2833;text-align:center;}
  button{
    padding:10px 18px;
    border:none;
    border-radius:8px;
    font-weight:600;
    background:linear-gradient(90deg,#007bff,#ffd700);
    color:white;
    cursor:pointer;
    margin:5px;
  }
  button:hover{opacity:0.9;transform:scale(1.05);}
</style>
</head>
<body>
  <div class="container">
    <h1>üìÖ My Task Calendar</h1>
    <div id="calendar"></div>
    <div style="text-align:center;margin-top:20px;">
      <button onclick="back()">‚Üê Back to Tasks</button>
      <button onclick="logout()">Logout</button>
    </div>
  </div>

<script>
const currentUser=localStorage.getItem('currentUser');
if(!currentUser||currentUser==='admin')location.href='index.html';
const users=JSON.parse(localStorage.getItem('users')||'{}');
const tasks=users[currentUser]?.tasks||[];

document.addEventListener('DOMContentLoaded',()=>{
  const calEl=document.getElementById('calendar');
  const cal=new FullCalendar.Calendar(calEl,{
    initialView:'dayGridMonth',
    height:'auto',
    headerToolbar:{left:'prev,next today',center:'title',right:'dayGridMonth,listWeek'},
    events:tasks.filter(t=>t.due).map(t=>({
      title:t.text+(t.completed?' ‚úÖ':''),
      start:t.due,
      color:t.completed?'#27ae60':'#f39c12'
    }))
  });
  cal.render();
});
function back(){location.href='tasky.html';}
function logout(){localStorage.removeItem('currentUser');location.href='index.html';}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tasky ‚Äî My Tasks</title>
<link href="https://fonts.cdnfonts.com/css/amsterdam-four" rel="stylesheet">
<style>
  :root{
    --primary:#007bff;--accent:#ffd700;--text:#1c2833;--card-bg:rgba(255,255,255,0.9);
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background:linear-gradient(135deg, rgba(255,215,0,0.6), rgba(30,144,255,0.7));
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:30px 0;
  }
  header{
    width:90%;
    max-width:1000px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:20px;
  }
  h1{font-family:'Amsterdam Four',cursive;margin:0;color:var(--text);}
  button{
    border:none;
    border-radius:8px;
    padding:10px 16px;
    cursor:pointer;
    font-weight:600;
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
    transition:all 0.2s ease;
  }
  button:hover{opacity:0.9;transform:scale(1.05);}
  .container{
    width:90%;
    max-width:1000px;
    background:var(--card-bg);
    border-radius:14px;
    box-shadow:0 8px 24px rgba(0,0,0,0.15);
    padding:24px;
    display:flex;
    flex-direction:column;
    gap:18px;
  }
  .task-inputs{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:space-between;
  }
  input,select,textarea{
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(0,0,0,0.15);
    flex:1;
    min-width:150px;
  }
  textarea{flex:1 1 100%;}
  ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:10px;}
  li{
    background:rgba(255,255,255,0.8);
    border-radius:10px;
    padding:12px;
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .task-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
  }
  .task-header input[type="text"]{
    border:none;
    background:transparent;
    font-weight:bold;
    font-size:15px;
    color:var(--text);
    width:70%;
  }
  .task-header input[type="text"]:focus{outline:1px solid var(--primary);}
  .task-info{color:#555;font-size:13px;}
  .buttons{display:flex;gap:8px;}
  .buttons button{padding:6px 10px;font-size:12px;}
  .completed{background:rgba(39,174,96,0.2);}
</style>
</head>
<body>
  <header>
    <h1>Tasky</h1>
    <div style="display:flex;gap:10px;">
      <button onclick="location.href='calendar.html'">üìÖ Calendar</button>
      <button onclick="logout()">Logout</button>
    </div>
  </header>

  <div class="container">
    <div class="task-inputs">
      <input id="taskText" placeholder="Task name..." />
      <input id="taskDue" type="date" />
      <input id="taskCat" placeholder="Category..." />
      <textarea id="taskNote" placeholder="Notes..."></textarea>
      <button style="flex:1" onclick="addTask()">Add Task</button>
    </div>

    <div style="display:flex;gap:10px;flex-wrap:wrap;">
      <select id="filter" onchange="renderTasks()">
        <option value="all">All</option>
        <option value="completed">Completed</option>
        <option value="pending">Pending</option>
      </select>
      <select id="sort" onchange="sortTasks()">
        <option value="date">Sort by Date</option>
        <option value="alpha">Sort by Name</option>
        <option value="cat">Sort by Category</option>
      </select>
    </div>

    <ul id="taskList"></ul>
  </div>

<script>
const currentUser=localStorage.getItem('currentUser');
if(!currentUser||currentUser==='admin')location.href='index.html';
const users=JSON.parse(localStorage.getItem('users')||'{}');
if(!users[currentUser]){users[currentUser]={password:'',tasks:[]};save();}
function save(){localStorage.setItem('users',JSON.stringify(users));}
function renderTasks(){
  const ul=document.getElementById('taskList');
  const filter=document.getElementById('filter').value;
  let tasks=users[currentUser].tasks;
  if(filter==='completed')tasks=tasks.filter(t=>t.completed);
  if(filter==='pending')tasks=tasks.filter(t=>!t.completed);
  ul.innerHTML='';
  tasks.forEach((t,i)=>{
    const li=document.createElement('li');
    if(t.completed)li.classList.add('completed');
    li.innerHTML=`
      <div class="task-header">
        <input type="text" value="${t.text}" onchange="editTask(${i},this.value)">
        <div class="buttons">
          <button onclick="toggleTask(${i})">${t.completed?'Undo':'Done'}</button>
          <button onclick="removeTask(${i})">üóë</button>
        </div>
      </div>
      <div class="task-info">
        üìÖ ${t.due||'No date'} ‚Ä¢ üè∑ ${t.category||'Uncategorized'}
      </div>
      <div style="font-size:13px;color:#444;">${t.note||''}</div>
    `;
    ul.appendChild(li);
  });
}
function addTask(){
  const text=document.getElementById('taskText').value.trim();
  const due=document.getElementById('taskDue').value;
  const cat=document.getElementById('taskCat').value.trim();
  const note=document.getElementById('taskNote').value.trim();
  if(!text)return alert('Enter a task name');
  users[currentUser].tasks.push({text,due,category:cat,note,completed:false});
  save();renderTasks();
  document.getElementById('taskText').value='';
  document.getElementById('taskDue').value='';
  document.getElementById('taskCat').value='';
  document.getElementById('taskNote').value='';
}
function editTask(i,val){users[currentUser].tasks[i].text=val;save();}
function toggleTask(i){users[currentUser].tasks[i].completed=!users[currentUser].tasks[i].completed;save();renderTasks();}
function removeTask(i){if(confirm('Delete this task?')){users[currentUser].tasks.splice(i,1);save();renderTasks();}}
function sortTasks(){
  const opt=document.getElementById('sort').value;
  users[currentUser].tasks.sort((a,b)=>{
    if(opt==='alpha')return a.text.localeCompare(b.text);
    if(opt==='cat')return a.category.localeCompare(b.category);
    if(opt==='date')return (a.due||'').localeCompare(b.due||'');
  });
  save();renderTasks();
}
function logout(){localStorage.removeItem('currentUser');location.href='index.html';}
renderTasks();
</script>
</body>
</html>
